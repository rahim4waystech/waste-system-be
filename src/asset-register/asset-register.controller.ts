
import { AssetRegister } from "./asset-register.entity";
import { Crud, CrudController, Feature, Action } from "@nestjsx/crud";
import { Controller, Delete, Param } from "@nestjs/common";
import { AssetRegisterService } from "./asset-register.service";
/**
 * This file was generated by Four Ways Technology
 *
 * On Fri Jan 15 2021 08:23:28 GMT+0000 (Greenwich Mean Time)
 */
@Crud({
    model: {
      type: AssetRegister
    },
    query: {
      join: {
        depot: {
          eager: true,
        },
        category: {
          eager: true,
        },
        part: {
          eager: true,
        },
      }
    }
  })
  @Controller('asset-register')
  @Feature('asset-register')
  export class AssetRegisterController implements CrudController<AssetRegister> {
    constructor(public service: AssetRegisterService) {}

    @Action('deleteByParentId')
    @Delete('deleteByParentId/:parentId')
    deleteByParentId(@Param() params) {

      if(!params['parentId']) {
        throw new Error('You must supply an id for deleteByParentId');
      }

      this.service.deleteByParentId(params['parentId']);
      return [];
    }
  }
